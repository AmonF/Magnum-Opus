<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Magnum</title>
<link href="Opus.css" rel="stylesheet" type="text/css">
</head>

<body>
	<div class="scenes" class="Scene1">
		<div>magnum</div>
		<button class="next" id="start">Start</button>
	</div>
	
	<div class="scenes" class="Scene2">
		<button class="home">home</button>
		<div>Please Wait for a ticket</div>
		<div id="clock">2:00</div>
		<button class="next" id="continue" style="visibility:hidden">continue</button>
		<button class="next" id="skip">skip</button>
	</div>
	
	<div class="scenes" class="Scene3">
		<button class="home">home</button>
		
		<div>Enter your Aggie Email address to be Entered into the drawing</div>
		
		<iframe name="hidden" style="display: none;"></iframe>
		
		<form id="email" action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSd6LrXa2MwBuFyc2Ewa5MK06g2vSOri0qfCLGednWCy0eGgrQ/formResponse" target="hidden">
			<input type="text" name="entry.1100716498" placeholder="example@aggies.ncat.edu" />
			
		</form>
		<button id="enter" type="submit">enter</button>
		<div class="tickets"></div>
		
	</div>
	
	<div class="scenes" class="Scene4">
		<h1><div class="tickets"></div></h1>
		<div>you have been entered!</div>
		<button class="home">home</button>
		<button class="next">Enter Again</button>
	</div>
	
</body>
	
	<script
  src="https://code.jquery.com/jquery-3.4.1.min.js"
  integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
  crossorigin="anonymous"></script>

  <script src="https://bitstorm.org/jquery/shadow-animation/jquery.animate-shadow-min.js"></script> <!-- shadow animaiton plugin -->
	
<script>
	
	var scene = 1;
	var tickets = 0;
	var time = 120;
	
	function next(){
		
		$(".tickets").text("you have " + tickets + ((tickets == 1)? " ticket":" tickets"));
		$(".Scene" + scene).hide();
		
		if(scene == 4){
			update();
			clockStart();
			$(".Scene2").show();
			scene = 2;
		}
		
		else{			
			$(".Scene" + (scene + 1)).css("visibility","visible").show();
			scene++;
		}
	}
	
	function home(){
	
		$(".Scene" + scene).hide();
		$(".Scene1").show();
		scene = 1;
	}
	
	function update(){
		$(".tickets").text(scene*10);
		$(".tickets").text("you have " + tickets + ((tickets == 1)? " ticket":" tickets"));
		clearInterval(clock);
		time = 120;
	}
	
	function clockStart(){	
		
		$("#continue").css("visibility","hidden");
		$("#skip").show();
		var tf = true;

		// Update the count down every 1 second
		var clock = setInterval(function() {
			
			if(scene != 2){clearInterval(clock);}
			
			var minutes = (time / 60) | 0;
			var seconds = time % 60;
			var format = minutes + ":" + ((seconds < 10) ? "0" + seconds : seconds);
			
			// Display the result in the element with id="clock"
		  	$("#clock").text(format);
			time--;
			
			// If the count down is finished, write some text
		  	if (time <= 0) {
				clearInterval(clock);
				time = 120;
				$("#clock").text("0:00");
				tickets++;
				
				$("#continue").css("visibility","visible");
				$("#skip").hide();
				
				var flash = setInterval(function(){
					if(scene != 2){clearInterval(flash); $("#clock").css("visibility","visible");}
					tf = !tf;
					$("#clock").css("visibility", (tf ? "visible":"hidden"));
				} ,500);
		  	}
		}, 100);
	}
	
	
	
	$(".next").click(function(){
		next();
		update();
		$("#clock").css("visibility","visible");
	});
	
	$(".home").click(function(){
		home();
		update();
	});
	
	$("#start").click(function(){
		update();
		if(time == 120){clockStart();}
	});
	
	$("#enter").click(function(){
		update();
		$(".tickets").text("you have " + tickets + ((tickets == 1)? " ticket":" tickets"));
//		$(".tickets").text("0");
		if(tickets > 0){
			tickets--;
			console.log(tickets);
			$("#email").submit();
			next();
		}
		else{alert("Not enough Tickets");}
		
	});
	
	
//	$(".tickets").text("you have " + tickets + ((tickets == 1)? " ticket":" tickets"));
	
	
</script>
</html>
